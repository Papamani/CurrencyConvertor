pipeline {
    agent any
    tools{
    maven 'Maven'
    }
    
    stages {

      stage('clean')
            {
                steps
                 { 
                    sh 'mvn clean install'
                 }
            }
     stage('SonarQube analysis') {
       steps{
        withSonarQubeEnv('SonarQube') {
            sh 'mvn package sonar:sonar'
           }
       }
   }
   
   
       stage('deploy'){
        steps{
            deploy adapters: [tomcat8(credentialsId: 'ffa910b2-9645-4337-bf03-c81e650547c9', path: '', url: 'http://13.127.29.212:8090/')], contextPath: 'dyna_proj', war: '**/*.war'
                  }
       
       }
}
}
